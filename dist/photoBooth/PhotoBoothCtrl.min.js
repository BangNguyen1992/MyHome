"use strict";!function(){function e(e){function t(t){for(var a=0;a<t.data.length;a+=4)t.data[a+0]=t.data[a+0]+e.color.red,t.data[a+1]=t.data[a+1]+e.color.green,t.data[a+2]=t.data[a+2]+e.color.blue;return t}function a(t){parseInt(e.colorSplit.red),parseInt(e.colorSplit.green),parseInt(e.colorSplit.blue);for(var a=0;a<t.data.length;a+=4)t.data[a+0]=t.data[a+0+e.colorSplit.red],t.data[a+1]=t.data[a+1+e.colorSplit.green],t.data[a+2]=t.data[a+2+e.colorSplit.blue];return t}var o=document.querySelector(".player"),r=document.querySelector(".photo"),l=r.getContext("2d"),n=document.querySelector(".strip"),i=document.querySelector(".snap");e.color={red:0,green:0,blue:0},e.colorSplit={red:0,green:0,blue:0},e.alpha=1,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){o.src=window.URL.createObjectURL(e),o.play()}).catch(function(e){console.error("OH NO !!!",e)}),o.addEventListener("canplay",function(){var n=o.videoWidth,i=o.videoHeight;return r.width=n,r.height=i,setInterval(function(){l.drawImage(o,0,0,n,i),e.pixels=l.getImageData(0,0,n,i),e.pixels=t(e.pixels),e.pixels=a(e.pixels),l.globalAlpha=e.alpha,l.putImageData(e.pixels,0,0)},30)}),e.takePhoto=function(){i.currentTime=0,i.play();var e=r.toDataURL("image/jpg"),t=document.createElement("a");t.href=e,t.setAttribute("download","download"),t.innerHTML='<img src="'+e+'" alt="Take photo"/>',n.insertBefore(t,n.firstChild)}}angular.module("myApp").controller("PhotoBoothCtrl",e),e.$inject=["$scope"]}();